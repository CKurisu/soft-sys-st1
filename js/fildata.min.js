$(function (){
    
    $('.fil-list-src').on('click',function (){
       var $this = $(this);
        var post   = $this.closest('th').index();
        var tblnm   = $this.parent().parent().parent().parent().attr('id');
        var tbl=('#'+tblnm);
        var val=$('th:eq('+post+') input#filterin').val();
        //var row   = $this.closest('tr').index();
        $searchPerColumn(tbl,val,post);
    });
    //FILTER PER PERIOD
    $('.btn-tblint-fild').on('click',function (){
       $ftrng('#t-int');
    });
    $('.btn-tblcli-fild').on('click',function (){
       $ftrng('#t-cli');
    });
    $('.btn-tblusr-fild').on('click',function (){
       $ftrng('#t-usr');
    });
    $('.btn-tblinfc-fild').on('click',function (){
       $ftrng('#t-infc');
    });
    $('.btn-tblinfsl-fild').on('click',function (){
       $ftrng('#t-infsl');
    });
    
    //FILTER PER SEARCH ADVANCED
    $('.fil-list-src-cliint').on('click',function(){ 
        var v=$('input#filter').val();
        $ftda('#t-int',v);
    });
    $('.fil-list-src-cli').on('click',function(){
        var regexp=/^[A-Z0-9]|{13,17}$/;
        var st=document.getElementById('filterin').value;
        var cd=$(this);
        //var di=$(this).closest('fieldset');
        var di=$(this).parent();
        console.log(di);
        var v=document.getElementById('filterin').value;
            if(regexp.test(st)){
                $ftda('#t-cli',v);
                di.removeClass('has-error');
            }else{
                di.addClass('has-error');
                var newdiv=document.createElement('div');
                //newdiv.classList.add('help-block');
                newdiv.setAttribute('class','help-block');
                newdiv.appendChild(document.createTextNode('Ingrese Solo Letras Mayusculas Y Numeros'));
                newdiv.innerHTML;
                cd.before(newdiv);
                setTimeout(function() {
                    $('.help-block').fadeOut(750);
                },500);
            }            
    });
    $('.fil-list-src-usr').on('click',function(){
        var v=$('input#filter').val();
        $ftda('#t-usr',v);
    });
    $('.fil-list-src-infc').on('click',function(){
        var v=$('input#filter').val();
        $ftda('#t-infc',v);
    });
    $('.fil-list-src-infsl').on('click',function(){
        var v=$('input#filter').val();
        $ftda('#t-infsl',v);
    });
    //$('.sea-vu').on('keyup',function(){$TblFilter('#usersTbl',this.value);});
    //$('.sea-vl').on('keyup',function(){$TblFilter('#loanTbl',this.value);});
    //$('.sea-inv').on('keyup',function(){$TblFilter('#intentoryTbl',this.value);});
    //$('.sea-vgt').on('keyup',function(){$TblFilter('#grouptopicTbl',this.value);});
    //$('.fil-na').on('keyup',function(){$TblFilter('.tbl-warehouse',this.value);});
    //$('.fil-list-na').on('keyup',function(){$TblFilter('.warehouse-tbl',this.value);});
    //$('.fil-ty').on('change',function(){if(this.value){$TblFilter('.tbl-warehouse',$('.fil-ty option:selected').text());}else{$TblFilter('.tbl-warehouse','');}});
    //$('.fil-list-ty').on('change',function(){if(this.value){$TblFilter('.warehouse-tbl',$('.fil-list-ty option:selected').text());}else{$TblFilter('.warehouse-tbl','');}});
    //$('#listdata_yui_i_867564').on('click',function (){location.replace(window.location.pathname+window.location.hash);});
});

$searchPerColumn=function (tbl, valor, position){
    finder = valor;
    var rows = document.querySelectorAll(tbl + ' tbody tr');        
    for(var i = 0; i < rows.length; i++){
        var showRow = false;
        var row = rows[i];
        row.style.display = 'none';
        $(tbl+' tbody tr').find('td:eq('+position+')').each(function (){
            stringer=$(this).html();
            if(stringer.toLowerCase().indexOf(finder.toLowerCase().trim())>-1){
                result=$(this).parent();
                console.log(finder.toLowerCase().trim());
                showRow = true;}});
        if(showRow){row.style.display = null;}}
//    for(var x = position; x < row.childElementCount; x++){
//            console.log(row.children[x].textContent.toLowerCase());
//            if(row.children[x].textContent.toLowerCase().indexOf(finder.toLowerCase().trim()) > -1){
//                showRow = true;break;}}
//        if(showRow){row.style.display = null;}}
}
$ftda=function (tbl, value){
    var rows = document.querySelectorAll(tbl + ' tbody tr');        
    for(var i = 0; i < rows.length; i++){
        var showRow = false;
        var row = rows[i];
        row.style.display = 'none';
        for(var x = 0; x < row.childElementCount; x++){
            if(row.children[x].textContent.toLowerCase().indexOf(value.toLowerCase().trim()) > -1){
                showRow = true;break;}}
        if(showRow){row.style.display = null;}}
}
$ftrng=function (tbl){
    var st=$('input#start').val();
    var nd=$('input#end').val();
    var rows = document.querySelectorAll(tbl + ' tbody tr');        
    for(var i = 0; i < rows.length; i++){
        var showRow = false;
        var row = rows[i];
        row.style.display = 'none';
        for(var x = 0; x < row.childElementCount; x++){
            if((row.children[x].textContent>=st)&& (row.children[x].textContent<=nd)){
                showRow = true;break;}}
        if(showRow){row.style.display = null;}}
    //$('input#start').val('');
    //$('input#end').val('');
}